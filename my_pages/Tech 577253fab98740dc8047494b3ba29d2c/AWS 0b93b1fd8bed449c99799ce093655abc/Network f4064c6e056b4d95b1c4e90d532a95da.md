# Network

> The example below is from HiTTO
> 

## **Route53**

- 3 zones
    - prod-chat.aif.musubu.co.in Public
    - est.prod-chat.aif.musubu.co.in Private
    - inf.prod-chat.aif.musubu.co.in Private

## Load Balancer

- 3 LB:
    - estimator-alb
        - application
        - [internal-estimator-alb-1710405587.ap-northeast-1.elb.amazonaws.com](http://internal-estimator-alb-1710405587.ap-northeast-1.elb.amazonaws.com/)
    - inferentia-alb
        - application
        - [internal-inferentia-alb-787399370.ap-northeast-1.elb.amazonaws.com](http://internal-inferentia-alb-787399370.ap-northeast-1.elb.amazonaws.com/)
    - prod-chat-nlb
        - network
        - [prod-chat-nlb-bea033535456be55.elb.ap-northeast-1.amazonaws.com](http://prod-chat-nlb-bea033535456be55.elb.ap-northeast-1.amazonaws.com/)
- → forward to  Target group
- Target Group with Target type = `IP / instance / other load balancer`

## **VPC**

All components are in the same VPC

## **Network routing example**

- From ECS any instance, access Estimator via internal URL:
    
    ```python
    https://est.prod-chat.aif.musubu.co.in
    ```
    
- → Route53, it points to:
    
    ```python
    dualstack.internal-estimator-alb-1710405587.ap-northeast-1.elb.amazonaws.com.
    ```
    

- → Load balancer(network): `estimator-alb`
- → listener `:443` → Target Group: `estimator-tg`
- > 10.0.140.135 or 10.0.149.148 (Just different AZ), 
i.e. 2 Estimator tasks in  ECS fargate