function boxGame_getMousePos(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}function boxGame_getRandomColor(){var a=Math.round(255*Math.random()),b=Math.round(255*Math.random()),c=Math.round(255*Math.random());return"rgb("+a+","+b+","+c+")"}function boxGame_box(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d,this.color=boxGame_getRandomColor(),this.drawBox=function(a){a.fillStyle=this.color,a.fillRect(this.x,this.y,this.width,this.height)},this.isPointInBox=function(a,b){return!(a<this.x)&&(!(b<this.y)&&(!(a>this.x+this.width)&&!(b>this.y+this.height)))},this.overLapsBox=function(a){return!!a.isPointInBox(this.x,this.y)||(!!a.isPointInBox(this.x+this.width,this.y)||(!!a.isPointInBox(this.x,this.y+this.height)||!!a.isPointInBox(this.x+this.width,this.y+this.height)))},this.overLapsBoxes=function(a){for(var b=0;b<a.length;b++)if(a[b].overLapsBox(this))return!0;return!1}}function boxGame_drawAllBoxes(a,b){boxGame_clearScreen(b);for(var c=0;c<a.length;c++)a[c].drawBox(b)}function boxGame_clearScreen(a,b){var b=$("#boxGame").get(0);a.setTransform(1,0,0,1,0,0),a.clearRect(0,0,b.width,b.height)}function boxGame_clearArray(a){for(;a.length;)a.pop()}$(document).ready(function(){var a=$("#boxGame").get(0),b=a.getContext("2d"),c=new Array,d=0,e=0,f=1e3;$("#boxGame").click(function(g){for(var h=boxGame_getMousePos(a,g),i=c.length-1;i>=0;i--)if(c[i].isPointInBox(h.x,h.y))return c.splice(i,1),boxGame_drawAllBoxes(c,b),d+=5,d>e&&(e=d),$("#peak").html(e.toString()),$("#score").html(d.toString()),f-=10,void(f<100&&(f=100));var j=new boxGame_box(h.x-25,h.y-25,50,50);j.drawBox(b),j.overLapsBoxes(c)&&(d-=15),c.push(j),d-=10,$("#score").html(d.toString())}),$("#clearButton").click(function(){boxGame_clearScreen(b),boxGame_clearArray(c),d=0,$("#score").html(d.toString()),f=1e3});var g=function(){var e=Math.round(Math.random()*a.width),h=Math.round(Math.random()*a.height),i=new boxGame_box(e,h,50,50);i.drawBox(b),i.overLapsBoxes(c)&&(d-=15),$("#score").html(d.toString()),c.push(i),window.setTimeout(function(){g()},f)};window.setTimeout(function(){g()},f)});
