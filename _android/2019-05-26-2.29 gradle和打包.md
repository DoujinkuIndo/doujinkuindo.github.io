---
title: 2.29 gradle和打包
permalink: /android/gradle/
last_modified_at: 2019-05-26T09:45:06-05:00
tags:
  - gradle Android打包
categories:
  - gradle Android打包
---

### 2.29.1 gradle
1. `project`
2. `task`
3. `plugin`
4. `ext`

### 2.29.2 Android打包原理
1. 构建流程
  - 构建流程图来自Google官网
  ![构建流程图来自Google官网](https://developer.android.com/images/tools/studio/build-process_2x.png?hl=zh-cn)

  - 构建流程图来自Google官网旧图
  ![构建流程图来自Google官网旧图](https://user-gold-cdn.xitu.io/2017/3/2/35a4d886bc51ec6be29456eadd4b1fd2.png?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)

    1. appt命令打包res资源文件, 生成R.java, resources.arsc和res文件
    2. 处理.aidl文件, 生成java接口文件
    3. Java Compiler编译, R.java, java源文件等编译成.class文件
    4. dex将.class和第三方库的.class处理生成.dex
    5. apkbuilder将resources.arsc和res文件和class.dex打包生成.apk
    6. Jarsigner将.apk签名
    7. zipalign对apk进行对齐处理
