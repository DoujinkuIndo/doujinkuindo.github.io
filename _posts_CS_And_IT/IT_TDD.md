---
layout: post
title: TDD
---

# TDD로 일하기
## TDD의 개발 주기

<div class="mermaid"> 
graph LR;
A(디자인)-->B; 
B(테스트 코드 작성)-->C; B-->A;
C(코드개발)-->D; 
D(리팩토링)-->B; 
</div>

<details>
<summary>TDD란?</summary>
<div markdown="1">

# TDD (Test-Driven Development, 테스트 주도 개발)
TDD란 Test Driven Development의 약자로 '테스트 주도 개발'이라고 한다. 반복 테스트를 이용한 소프트웨어 방법론으로, 작은 단위의 테스트 케이스를 작성하고 이를 통과하는 코드를 추가하는 단계를 반복하여 구현한다. 

짧은 개발 주기의 반복에 의존하는 개발 프로세스이며 애자일 방법론 중 하나인 eXtream Programming (XP)의 'Test-First' 개념에 기반을 둔 단순한 설계를 중요시한다. 

이 기법을 개발했거나 '재발견' 한 것으로 인정되는 Kent Beck은 2003년에 TDD가 단순한 설계를 장려하고 자신감을 불어넣어 준다고 말하였다. 

* eXtream Programming(XP)는 미래에 대한 예측을 최대한 하지 않고, 지속적으로 프로토타입을 완성하는 애자일 방법론 중 하나입니다. 이 방법론은 추가 요구사항이 생기더라도, 실시간으로 반영할 수 있습니다.

* 단위 테스트(Unit test)는 말 그대로 한 단위만을 테스트하는 것입니다.

* TDD의 장점과 단점을 작성해야 함

## 기능 테스트 (Functional)
클라이언트가 제공한 기능명세를 이용하여 수행하며 소프트웨어의 기능 요구사항을 확인합니다.

### 유닛 테스트

<details>
<summary>유닛테스트 작성을 위한 원칙 FIRST</summary>
<div markdown="1">

* FAST
  - **테스트는 빨라야 한다. 여기서 빠름의 기준은 밀리 초(ms)이다.** 단위 테스트를 테스트하는 데 있어 실행 시간이 0.5 초 또는 0.25 초가 걸리는 테스트는 빠른 테스트가 아니다.
  - 하나의 프로젝트에서 적게는 몇백 개에서 많게는 수천 개의 테스트를 할 수 있으므로 테스트의 실행 시간은 빨라야 한다. 만약 테스트가 느리다면 개발자는 테스트를 주저하게 되고 자주 검증하지 않은 소스코드는 그만큼 버그가 발생할 확률이 높아진다.

* Independent 
    - **테스트에 사용된 데이터들은 서로 의존하면 안 된다.**테스트에 필요한 데이터는 테스트 내부에서 독립적으로 사용해야 한다. 만약 데이터가 서로에게 의존하면 테스트 하나가 실패할 때 나머지도 잇달아 실패하므로 원인을 진단하기 어려워지기 때문이다. 
    - 때론 데이터의 존재 여부를 찾는 테스트가 있는 경우엔 해당 데이터는 테스트 내부에서 생성되어야 하며 나중에 테스트에 영향을 미치지 않도록 제거해야 한다.

* Repeatable
    - **테스트는 어느 환경에서든 반복적으로 테스트를 실행할 수 있어야 한다.** 여기서 환경은 네트워크 나 데이터베이스에 의존하지 않는 환경을 뜻한다. 결론적으로 인터넷이 되든 안 되든 데이터베이스에 접속하든 안 하든 언제 어디서나 테스트를 할 수 있어야 한다.
    - 환경에 의존하지 않는 테스트가 실패할 수 있는 유일한 이유는 오로지 테스트할 클래스 또는 메소드가 제대로 작동하지 않기 때문이다.

* Selef-Validating 
    - **테스트는 자체 검증이 되어야 한다.** 테스트의 검증은 수작업이 아닌 자동화가 되어야 하는데 테스트가 실행될 때마다 메서드 출력이 올바른지를 확인하는 것은 개발자가 결정해서는 안 된다. 
    - 이 때문에 자바 환경에서는 테스트에 대한 검증을 지원하는 JUnit을 사용하여 테스트의 통과 여부를 결정한다.

</div>
</details>

### 스모크 테스트
### 세너티 테스트
### 통합 테스트
### 화이트 박스 테스트
### 블랙 박스 테스트
### 사용자 인수 테스트
### 리그레션 테스트

## 비기능 테스트 (Non-Functional)
소프트웨어 시스템의 성능, 안정성, 확장성 등 비기능적 측면을 확인합니다.

### 성능 테스트
### 부하 테스트
### 볼륨 테스트
### 스트레스 테스트
### 보안 테스트
### 설치 테스트
### 침투 테스트
### 호환성 테스트
### 마이그레이션 테스트

</div>
</details>

* 아래의 내용을 정리해야 합니다.
* Clean code를 보고 공부해야 합니다.

# 단위 테스트 (Unit Test)

```
단위 테스트는 응용 프로그램에서 테스트 가능한 가장 작은 소프트웨어를 실행하여 예상대로 동작하는지 확인하는 테스트이다.
```

**단위 테스트에서 테스트 대상 단위의 크기는 엄격하게 정해져 있지 않다. 하지만, 일반적으로 클래스 또는 메소드 수준으로 정해진다. 단위의 크기가 작을수록 단위의 복잡성이 낮아진다.** 따라서, 단위 테스트를 활용하여 동작을 표현하기 더 쉬워진다. 즉, 테스트 대상 단위의 크기를 작게 설정해서 단위 테스트를 최대한 간단하고 디버깅하기 쉽게 작성해야 한다.

소프트웨어를 개발할 때, 소프트웨어 내부 구조나 구현 방법을 고려하여 **개발자 관점에서 테스트**한다. 그러므로 단위 테스트는 소프트웨어 내부 코드에 관련한 지식을 반드시 알고 있어야 하는 화이트박스 테스트이다. 단위 테스트는 TDD와 함께 할 때 특히 더 강력해진다.

## Timely
단위 테스트는 실제 코드를 작성하기 전에 작성해야된다. 이 규칙은 TDD를 수행하는 경우 반드시 따라야 하는 규칙이다.

# 통합 테스트(Integration Test)

```
통합 테스트는 단위 테스트보다 더 큰 동작을 달성하기 위해 여러 모듈들을 모아 이들이 의도대로 협력하는지 확인하는 테스트이다.
```

통합 테스트는 단위 테스트와 달리 개발자가 변경할 수 없는 부분(ex. 외부 라이브러리)까지 묶어 검증할 때 사용한다. 이는 DB에 접근하거나 전체 코드와 다양한 환경이 제대로 작동하는지 확인하는데 필요한 모든 작업을 수행할 수 있다. 그러나, 통합 테스트가 응용 프로그램이 완전하게 작동하는 걸 무조건 증명하지는 않는다.

통합 테스트의 장점은 단위 테스트에서 발견하기 어려운 버그를 찾을 수 있다는 점이다. 예를 들어, 통합 테스트에서는 환경 버그(ex. 싱글 코어 CPU에서는 잘 실행되나 쿼드 코어 CPU에서는 잘 실행되지 않음)이 발생할 수 있다.

한편, 통합 테스트의 단점은 단위 테스트보다 더 많은 코드를 테스트하기 때문에 신뢰성이 떨어질 수 있다는 점이다. 또, 어디서 에러가 발생했는지 확인하기 쉽지 않아 유지보수하기 힘들다는 점도 있다.

# 인수 테스트(Acceptance Test)

```
인수 테스트는 사용자 스토리(시나리오)에 맞춰 수행하는 테스트이다.
```

앞선 두 테스트들과 달리 비즈니스 쪽에 초점을 둔다. 프로젝트에 참여하는 사람들(ex. 기획자, 클라이언트 대표, 개발자 등)이 토의해서 시나리오를 만들고, 개발자는 이에 의거해서 코드를 작성한다. 개발자가 직접 시나리오를 제작할 수도 있지만, 다른 의사소통집단으로부터 시나리오를 받아(인수) 개발한다는 의미를 가지고 있다.

## 인수테스트의 유형으로 다음이 있습니다.
**공식적 테스트**
* 사용자 인수테스트 : 사용자가 시스템 사용의 적절성을 직접 확인
* 운영상 인수테스트 : 시스템 관리자에 의해 수행, 백업 및 복원 테스팅, 재난복구, 사용자 관리, 유지보수 작업, 보안 취약성에 대한 정기적인 점검
* 계약 인수테스트 : 맞춤식 개발(Custom Developed) 소프트웨어가 계약상의 인수조건을 준수하는지 확인
* 규정 인수테스트 : 정부의 지침, 법률 또는 안정규정과 같은 정해진 규정을 준수하는지 확인

**비공식적 테스트**
* 알파 테스트 : 개발 조직내의 테스트로 실제 환경과 동일한 환경으로 테스트
* 베타 테스트 : 사용자 환경에서 진행하며 사용자가 모든 문제를 보고, COTS가 상업적으로 판매되기 전 목표시장의 기존 고객과 잠재고객의 피드백을 받을 목적으로 활용

참고자료
: [단위 테스트 vs 통합 테스트 vs 인수 테스트](https://tecoble.techcourse.co.kr/post/2021-05-25-unit-test-vs-integration-test-vs-acceptance-test/)
, [고객이 확인하는, 인수 테스트](https://needjarvis.tistory.com/446)