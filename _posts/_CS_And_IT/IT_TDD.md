---
layout: post
title: TDD
---

Clean code를 보고 공부해야 합니다.

# TDD (Test-Driven Development, 테스트 주도 개발)
TDD란 Test Driven Development의 약자로 '테스트 주도 개발'이라고 한다. 반복 테스트를 이용한 소프트웨어 방법론으로, 작은 단위의 테스트 케이스를 작성하고 이를 통과하는 코드를 추가하는 단계를 반복하여 구현한다. 

짧은 개발 주기의 반복에 의존하는 개발 프로세스이며 애자일 방법론 중 하나인 eXtream Programming(XP)의 'Test-First' 개념에 기반을 둔 단순한 설계를 중요시한다. 

이 기법을 개발했거나 '재발견' 한 것으로 인정되는 Kent Beck은 2003년에 TDD가 단순한 설계를 장려하고 자신감을 불어넣어 준다고 말하였다. 

* eXtream Programming(XP)는 미래에 대한 예측을 최대한 하지 않고, 지속적으로 프로토타입을 완성하는 애자일 방법론 중 하나입니다. 이 방법론은 추가 요구사항이 생기더라도, 실시간으로 반영할 수 있습니다.

* 단위 테스트(Unit test)는 말 그대로 한 단위만을 테스트하는 것입니다.

# TDD의 장점

다음은 웹개발에서 [TDD Famework를 도입해야 하는 이유](http://includes.egloos.com/v/1420572)를 가져왔습니다.

## 실행 코드와 테스트 코드의 분리

## 입력값 패턴 입력 자동화 처리

## 보다 철저한 경계조건(Boundary Condition)검사

## 클래스/모듈 결합 테스트시 오류 발견 쉬움

##  '리팩토링(Refactoring)'의 필수 도구

## '심리적 불안'을 체계적인 확인사살'로 해소

## 웹 개발의 경우, 화면 테스트로는 작동을 100% 확신할 수 없음

## 문서화 작업 부담 경감

## 디버깅 작업 단축

## '믿음'대신 '검사', '전도'보다는 '입증'

## 추가 구현의 용이함
개발이 완료된 소프트웨어에 어떤 기능을 추가할 때 가장 우려되는 점은 해당 기능이 기존 코드에 어떤 영향을 미칠지 알지 못한다는 것입니다. 하지만 TDD의 경우 자동화된 유닛 테스팅을 전제하므로 테스트 기간을 획기적으로 단축시킬 수 있습니다.

# TDD의 단점



# TDD로 일하기
## TDD의 개발 주기

<div class="mermaid"> 
graph LR;
A(디자인)-->B; 
B(테스트 코드 작성)-->C; B-->A;
C(코드개발)-->D; 
D(리팩토링)-->B; 
</div>

# 단위 테스트의 FIRST 규칙
## FAST
테스트는 빨라야 한다. 여기서 빠름의 기준은 밀리 초(ms)이다. 단위 테스트를 테스트하는 데 있어 실행 시간이 0.5 초 또는 0.25 초가 걸리는 테스트는 빠른 테스트가 아니다.
하나의 프로젝트에서 적게는 몇백 개에서 많게는 수천 개의 테스트를 할 수 있으므로 테스트의 실행 시간은 빨라야 한다. 만약 테스트가 느리다면 개발자는 테스트를 주저하게 되고 자주 검증하지 않은 소스코드는 그만큼 버그가 발생할 확률이 높아진다.

## Independent 
테스트에 사용된 데이터들은 서로 의존하면 안 된다. 테스트에 필요한 데이터는 테스트 내부에서 독립적으로 사용해야 한다. 만약 데이터가 서로에게 의존하면 테스트 하나가 실패할 때 나머지도 잇달아 실패하므로 원인을 진단하기 어려워지기 때문이다. 때론 데이터의 존재 여부를 찾는 테스트가 있는 경우엔 해당 데이터는 테스트 내부에서 생성되어야 하며 나중에 테스트에 영향을 미치지 않도록 제거해야 한다.

## Repeatable
테스트는 어느 환경에서든 반복적으로 테스트를 실행할 수 있어야 한다. 여기서 환경은 네트워크 나 데이터베이스에 의존하지 않는 환경을 뜻한다. 결론적으로 인터넷이 되든 안 되든 데이터베이스에 접속하든 안 하든 언제 어디서나 테스트를 할 수 있어야 한다. 환경에 의존하지 않는 테스트가 실패할 수 있는 유일한 이유는 오로지 테스트할 클래스 또는 메소드가 제대로 작동하지 않기 때문이다.

## Selef-Validating 
테스트는 자체 검증이 되어야 한다. 테스트의 검증은 수작업이 아닌 자동화가 되어야 하는데 테스트가 실행될 때마다 메서드 출력이 올바른지를 확인하는 것은 개발자가 결정해서는 안 된다. 이 때문에 자바 환경에서는 테스트에 대한 검증을 지원하는 JUnit을 사용하여 테스트의 통과 여부를 결정한다.

## Timely
단위 테스트는 실제 코드를 작성하기 전에 작성해야된다. 이 규칙은 TDD를 수행하는 경우 반드시 따라야 하는 규칙이다.