---
layout: post
title:  Hive 学习笔记
date:   2017-05-11 9:53:00 +0800
categories: Hive
tag: 学习笔记
---

* content
{:toc}
# 一、hive的基本特性

1. hive是基于Hadoop的一个数据仓库工具，可以将结构化的的数据文件映射为一张数据表，并提供完整的sql查询功能，可以将sql语句转换为MapReduce任务进行运行。
2. 开发者可以自定义mapper和reducer来处理内建的mapper和reducer

# 二、hive和关系数据库的区别

1. 存储的文件系统不同

2. 计算模型不同，hive是mapreduce，关系型数据库是自己设计的计算模型

3. 相对于关系型数据库，hive的实时性很差，这个主要是因为二者作用的领域不同，关系型数据库是为实时查询业务进行设计的，hive则是为海量数据做挖掘设计的

4. hive更易扩展

   上面是一些宏观的区别，细节上的区别主要有以下几点

5. 关系数据库里，表的加载模式是在数据加载时候强制确定的，如果加载数据时候发现加载的数据不符合模式，关系数据库则会拒绝加载数据（写时模式）。Hive在加载数据时候和关系数据库不同，hive在加载数据时候不会对数据进行检查，也不会更改加载的数据文件，而检查数据格式的操作是在查询操作时候执行（读时模式）。

6. 关系数据库一个重要的特点是可以对某一行或者某些行的数据进行更新、删除操作，hive不支持读某个具体行的操作，hive对数据的操作只支持覆盖元数据和追加数据。


# 三、hive的数据类型

1. 基本数据类型对应了java的基本数据类型

   tinyint  ->  byte(1字节)	smallint  -> short(2字节)	int   ->  int(4字节)	bigint   ->   long(8字节)

   float     ->  float(4字节)	double   ->  double(4字节)

   字符串类型用string表示

2. 复杂数据类型

   array:一组有序数组，字段的类型必须相同 array(1,2)

   map:一组无序的键值对

   struct：一组命名的字段

# 四、hive的数据模式

1. Database

2. table

   托管表：存储在hive的数据仓库里

   外部表：存储在hive的数据仓库或者hive数据仓库外部的分布式文件系统上

3. 分区（partition）

   根据“分区列”的值对表的数据进行粗略划分的机制，在hive存储就体现在表的主目录下的一个子目录

4. 桶（bucket）

   上面的table和partition都是目录级别的拆分数据，bucket则是对数据源数据文件本身来拆分数据

