---
layout: post
title: SHELL COMMANDS
---
## SHELL

给directory目录添加root权限

```shell
chmod -R 777 directory/
```



如何在任意目录执行某一个可执行文件:方法即将可执行文件的目录添加到PATH环境变量中去，这样就可以任意目录执行了。

```shell
export PATH=/path/to/your/demo:/$PATH
```



查看当前目录下每个文件及文件夹所占内存

```shell
du -ah --max-depth=1   # 查看每个所占内存并列出来，比较慢
du -sh  # 只显示所占的总内存，不列出每个详细，比较快
```



ls命令

```shell
ls -lh  # 查看文件具体大小，会显示单位K/M/G。
```



ssh

```shell
sudo apt install openssh-server  # 安装ssh协议
service sshd start   # 打开ssh
service sshd status   # 查看ssh状态
service sshd stop   # 关闭ssh
```



at(在某个时间自动执行shell脚本)

```shell
date   # 查看时间
echo "hello world" > log | at 20:10    # 在今天20:10分向log文件写入hello world 
```



crontab

```shell
sudo crontab -e  # 打开crontab
00 00 * * * /path/to/run.sh   # run shell everday in 00:00
sudo /etc/init.d/cron start   # 开始运行cron
sudo /etc/init.d/cron stop   # 停止运行
```



```shell
$1   # 运行.sh时的输入参数
set -e  # 一般放在.sh脚本最上面,表示初始化环境变量

pushd $DIR  # 进去DIR目录
popd        # 退出目录
```



新建一个str list

```shell
MY_LIST=(
python
cpp
)

for str in "${MY_LIST[@]}"; do
  echo $str
done

NEW_LIST=(${MY_LIST[*]})  # 把MY_LIST赋值给另一个变量
```





判断文件夹是否存在

```shell
if [ -d dir ]; then
   echo "dir is exist"
fi
```



split str

```shell
str=path/to/name
dir="$(cut -d'/' -f1 <<< "$str")"   # 按照/来split 并取出f1,第一个字符
echo $dir
# path
```



去除文件中所有的空行/向文件中添加一行空行

```shell
sed '/^$/d' old.log > new.log   # 去除old.log中所有空行并且保存在new.log中
echo "" > log  # 向log文件的最后一行添加空行
```



shell中赋值更改变量的值

```shell
num=1
num=$((num+1))  # num+1并重新赋值给num
```



读取文件中每一行

```shell
while IFS= read -r line || [ -n "$line" ]; do
  echo $line   # 把每一行打印出来
done < log   # 读取log文件中每一行
```



shell中添加函数

```shell
FUN() {
echo "do something"
}

FUN   # 运行函数
```



把一个文件内容加到另一个文件最后

```shell
cat log1 >> log2   # cat可以直接处理文件的添加, >> 表示在log2基础上在加上log1内容
```



shell中正则表达

```shell
# log文件内容如下
echo "This is log file"
dense=<"0xB5508">

# 用正则表达去代替dense=<"0xB5508">
sed -i "s/dense<\"0\([xX]\)\([0-9a-fA-F]*\)\"/dense<\"{{0[xX][0-9a-fA-F]+}}\"/g" log
```

