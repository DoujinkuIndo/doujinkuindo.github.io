---
layout: post
title: –°–æ–±–∏—Ä–∞–µ–º —è–¥—Ä–æ 2.6.34 —Å –ø–∞—Ç—á–µ–º bfs –≤ Debian Squeeze
---

–ù–µ–¥–∞–≤–Ω–æ —Å–ø–∞–ª–∏–ª –º–∞—Ç–µ—Ä–∏–Ω—Å–∫—É—é –ø–ª–∞—Ç—É –∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä (–¥–∞ –∂–µ –Ω–µ –∑–Ω–∞—é –¥–µ–ª–æ –≤ –º–æ–∏—Ö —Ä—É–∫–∞—Ö –∏–ª–∏ –æ–Ω–æ —Å–∞–º–æ). –ö—É–ø–∏–ª –Ω–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–Ω—Å–∫—É—é –ø–ª–∞—Ç—É –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –∏ –∫–∞–∫ –≤–æ–¥–∏—Ç—Å—è, —Å –º–æ–∏–º —Å—Ç–∞—Ä—ã–º –∑–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —è–¥—Ä–æ–º –º–Ω–æ–≥–æ–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ. –°–∫–∞—á–∞–ª —è–¥—Ä–æ 2.6.34, –Ω–æ –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –æ–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å–æ–±–∏—Ä–∞–ª–æ—Å—å ‚Äî –≤—ã—Å–∫–∞–∫–∏–≤–∞–ª–æ –∫—É—á–∞ –æ—à–∏–±–æ–∫, –≤–æ–æ—Ä—É–∂–∏–≤—à–∏—Å—å google —è –Ω–∞—á–∞–ª –∏—Å–∫–∞—Ç—å –ø–æ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã–º —Ñ–æ—Ä—É–º–∞–º, –Ω—É –∏ –Ω–∞—à–µ–ª (—Å–æ–±–∏—Ä–∞—Ç—å –ª—É—á—à–µ –∏–∑-–ø–æ–¥ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ —è–¥—Ä–∞ –∏–∑ —Ä–µ–ø–∞–∑–∏—Ç–∞—Ä–∏—è)

* –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –Ω—É–∂–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `cd /usr/src/`
* –ö–∞—á–∞–µ–º –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ `wget http://www.kernel.org/pub/linux/kernel/v2.6/linux-2.6.34.tar.bz2`
* –†–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ–º –∏—Ö `tar xvjf linux-2.6.34.tar.bz2`
* –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏ `cd linux-2.6.34`
* –ö–∞—á–∞–µ–º –ø–∞—Ç—á bfs –∫ —è–¥—Ä—É —Å —Å–∞–π—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ `wget http://ck.kolivas.org/patches/bfs/2.6.34-sched-bfs-318.patch`
* –ü–∞—Ç—á–∏–º —è–¥—Ä–æ `patch -p1 < 2.6.34-sched-bfs-318.patch`
* –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ —è–¥—Ä–∞ `apt-get install kernel-package libncurses5-dev fakeroot wget bzip2 build-essential`
* –¢–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —è–¥—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π `cp /boot/config-`uname -r` ./.config`
* –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º —è–¥—Ä–æ `make menuconfig`
* –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω—è–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø–æ –≤–∫—É—Å—É)
    ```text
    Processor type and features -> Timer frequency —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤ 1000Hz
    Processor type and features -> Tickless System (Dynamic Ticks) –æ—Ç–∫–ª—é—á–∞–µ–º
    Processor type and features -> Preemption Model -> Preemptible kernel (Low latency desktop)
    ```
* –ó–∞—Ç–µ–º `make-kpkg clean`
–ò —Ç—É—Ç –º–∞–ª–µ–Ω—å–∫–∏–π –∏–∑–≤–æ—Ä–æ—Ç –æ—Ç–ª–∏—á–∞—é—â–∏–π –æ—Ç –¥—Ä—É–≥–∏—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π gedit ./Documentation/lguest/Makefile –∏ –ø—Ä–∏–≤–æ–¥–∏–º –∫ –≤–∏–¥—É:
    ```text
    # This creates the demonstration utility ¬´lguest¬ª which runs a Linux guest.
    CFLAGS:=-m32 -Wall -Wmissing-declarations -Wmissing-prototypes -O3 -I../../include -I../../arch/x86/include -U_FORTIFY_SOURCE
    all:

    clean:
    rm -f lguest
    ```

* –ù—É –∏ —Å–æ–±–∏—Ä–∞–µ–º —è–¥—Ä–æ –∏ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã `fakeroot make-kpkg ‚Äîinitrd ‚Äîappend-to-version=-bfs_my kernel_image kernel_headers`
* –ù–∞ —ç—Ç–∞–ø–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤ –æ–Ω–æ —Ä—É–≥–Ω–µ—Ç—Å—è –∏ –≤—ã–≤–∞–ª–∏—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π –Ω–∞ –∏–º—è —Å–±–æ—Ä–∫–∏, —Ç–æ–≥–¥–∞ –¥–µ–ª–∞–µ–º: `cp include/generated/utsrelease.h include/linux/` –∏ –∑–∞–Ω–æ–≤–æ –∑–∞–ø—É—Å–∫–∞–µ–º `fakeroot make-kpkg ‚Äîinitrd ‚Äîappend-to-version=-bfs_my kernel_image kernel_headers`
* –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ, —Ç–æ –≤ `/usr/src/` –ø–æ—è–≤–∏—Ç—Å—è 2 –Ω–æ–≤—ã—Ö –ø–∞–∫–µ—Ç–∞ ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏—Ö `dpkg -i linux-*.deb`

–≠—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –ø–æ –∫—É—á–∏ –¥—Ä—É–≥–∏—Ö –∏ —á—Ç–æ —è –±—Ä–∞–ª –∏ –≥–¥–µ —è —É–∂–µ –Ω–µ –ø–æ–º–Ω—é, —Ç.–∫. –ø–∏—à—É —É–∂–µ —Å —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ —è–¥—Ä–∞ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞. –£–¥–∞—á–Ω–æ–π –≤–∞–º —è–¥–µ—Ä–Ω–æ–π —Ñ–∏–∑–∏–∫–∏ üôÇ