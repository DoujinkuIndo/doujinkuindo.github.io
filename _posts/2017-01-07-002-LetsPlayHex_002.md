---
layout: post
title: JavaScript frostical-Layout
---

メモです。

hexOnWebを実装していて気が付いたのですが、 `document.documentElement.clientWidth` と `document.documentElement.clientHeight` て、レイアウト決める際に、そのままの値を使うとスクロールバーが表示されていない状態で測値してしまうため、レイアウト後に若干はみ出してしまうことがあるようです。手っ取り早く解決するために、最初に`div`の幅と高さを表示領域の2倍に広げてスクロールバーを表示させた後に、再補正する、という手段をとってみました。

<!--break-->

他にもbody自体の属性を変えてスクロールバー常時表示ということもできそうですが、ブラウザ依存（スマホ機種依存）ありそうなので、確実に。

```javascript
    var offset_left;
    offset_left = $(gamebox).get(0).offsetLeft;

    /* initial game board */    
    /* iPhone and Tablet support */
    /* for side schroll-bar size */
    $(gamebox).css("width", document.documentElement.clientWidth * 2);
    $(gamebox).css("height", document.documentElement.clientHeight * 2);
    if ((document.documentElement.clientWidth - (offset_left * 2)) < board_x) {
        board_x = document.documentElement.clientWidth - (offset_left * 2);
        board_y = Math.floor(board_x / 3 * 4);
    }

    $(gamebox).css("width", board_x);
    $(gamebox).css("height", board_y);
    $(gamebox).css("background-color", "#EEE");
    $(gamebox).css("position", "relative");
```

メモです。
