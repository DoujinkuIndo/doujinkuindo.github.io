---
title: Pandas
author: Min
date: 2022-03-16
category: Jekyll
layout: post
---

- __pandas / api__ : [https://pandas.pydata.org/docs/reference/index.html](https://pandas.pydata.org/docs/reference/index.html)

pandas is an open source, BSD-licensed library providing high-performance, easy-to-use data structures and data analysis tools for the Python programming language.



기본함수
-------------
```python
# csv 파일일기 
df = pd.read_csv('https://bit.ly/ds-house-price')
# Data Type확인
df.info()
#통계값 확인
df.describe()
#컬럼 재정의
df = df.rename(columns={'컬럼명1': '컬럼명'})
#haed 기본5
df.head(10)
#tail 기본5
df.tail(10)
#구조확인
df.shape
```

조회/삭제
-------------
```python
#검색
df.loc[df['컬럼명'] == '',['컬럼명1','컬럼명2']]
#검색후 변경
df.loc[df['컬럼명'] == ''] = 0
#loc 다중 조건 후 값 변경 
df.loc[ (df['컬럼명'] == '조건1') & (df['컬럼명'] < '조건2')] = 0
#결측치가 있는 행 제거 
df.dropna()
#중복값 제거
df.drop_duplicates()
#특정 조건 제거
df = df.drop(df.loc[df['컬럼명'] == 0].index)
#공백제거
df['컬럼명'].str.strip()
#치환
df['컬럼명'] = df['컬럼명'].str.replace(',','')
#null값 찾기
df['컬럼명'].isna()
#null값 찾기(모든컬럼)
df.loc[df['컬럼명'].isna()
#null 개수
df['컬럼명'].isna().sum()
#null 값 변경
df['컬럼명'] = df['컬럼명'].fillna(0)
```

그룹함수
-------------
```python
#컬럼별 groupby 
df.groupby('그룹컬럼')['표현컬럼'].mean()
df.groupby(df['그룹컬럼'])[['표현컬럼1','표현컬럼2']].mean()

#pivot
df.pivot(index='행컬럼', columns='열컬럼', values='값컬럼')
# 만약 위의 데이터에 동일 date에 A값이 2개 이상 존재한다면 아래 오류가 발생한다.
# 'ValueError: Index contains duplicate entries, cannot reshape'
# 이런 경우 중복이 발생하지 않도록 데이터를 정제 후 사용해야한다.
```

시각화
-------------
```python
df.plot()
df['컬럼명'].plot()
df['컬럼명'].plot(kind='옵션')
    # kind 옵션:

    # line: 선그래프
    # bar: 바 그래프
    # barh: 수평 바 그래프
    # hist: 히스토그램
    # kde: 커널 밀도 그래프
    # hexbin: 고밀도 산점도 그래프
    # box: 박스 플롯
    #      - 우선 데이터의 describe 를 확인
    #      - IQR은 Inter Quantile Range의 약어로써, (3Q-1Q) * 1.5 값 
    #      - 이걸로 max, min 값을 정한후 예외처리해야 하는 범위를 선정함
    # area: 면적 그래프
    # pie: 파이 그래프
    # scatter: 산점도 그래프
df.loc[df['컬럼명'] == '조건'].groupby(['그룹컬럼'])['value컬럼'].mean().plot(kind='kind옵션')
# hexbin 은 x, y 가 정의되고 numeric 한 값만 넣어줘야함
df.plot(kind='hexbin', x='컬럼1', y='컬럼2', gridsize=20)
```
박스 플롯

![박스 플롯](https://justinsighting.com/wp-content/uploads/2016/12/boxplot-description.png)