---
layout: post

title: Ruby - How to render partial in an .erb layout
---

```ruby
template = %(
  <!DOCTYPE html>
    <html>
      <body>

          <%= yield %>

      </body>
    </html>
)

partial = %(
    <h1>Hello <%= nom %> </h1>
      <ul>
        <% messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>)


set_partial = ->(nom,messages) { ERB.new(partial).result(binding) }

def set_binding
  binding
end


obj = ERB.new(template)

name = "ERB from yield"
messages = [ "Ligne 3", "Ligne 4" ]

view = obj.result(set_binding {set_partial.call(name, messages)})

puts view
File.open("app.html", "w") { |file| file.puts view}
%x[ open -a 'Google Chrome' app.html ]
```
