---
layout: post
title: "Musings about Remote Development with Visual Studio Code"
description: "Short snippets of notes on VSCode Remote Developent extensions from the perspective of a remote compute user"
excerpt: Keeping codes and configuration files in sync between client machine and remote server used to be a drawn-out exercise in personal responsibility via SFTP/SCP. VSCode Remote Development looks to change that - for the better.
---
---

When running computation codes on the remote HPC (high-performance computing) cluster, I need to ensure that I am running the correct version of the code with the intended configuration files which define the parameters of the job to be run. I run computational fluid dynamics (CFD) codes using OpenFOAM v5.0 (a C++ library for CFD), and need to keep track of the combination of constants + boundary and initial conditions + spatio-temporal discretization schemes + solvers + number of compute nodes that I was using for the CFD simulations in the form of configuration files. Often, I have to check these configurations using vim on the remote cluster environment before executing my codes on the cluster, which could sometimes lead to frustration as I would need to check across to ensure that changes to these files on the local desktop environment and the remote cluster environment are in sync with each other.

Amongst my scatter-brained angst of ensuring that the correct jobs are run on the HPC and the correct results are retrieved from the HPC back to my local desktop environment, I wonder - is there a more user-friendly way for me to work and make changes directly on the remote environment, without going through vim and (clumsily, since I do tend to make mistakes on vim) mess up my configuration files?


---

## Challenges of doing remote dev work in Data Analytics

When I started my current role as a data engineer in a Data Analytics team, the team was getting started with moving code development work onboard an on-premise development cloud. Running data preprocessing and model training codes on our laptops took hours or even days to complete, since our work laptops were meant for general-purpose usage and weren't powerful enough (2 cores, 4 threads) to run deep learning codes and computationally-intensive workflows without crashing halfway. Running our codes on CentOS-based compute VM instances in our development cloud was relatively smoother and faster after the VM instances were scaled up to 32 cores; however, editing codes on-the-fly within the remote instance did not feel as intuitive as developing/debugging codes on the GUI code editors on our Windows-based local machine.

Initially, my remote development workflow looks similar to this:
1. Write/edit code on Notepad++ / Visual Studio Code / Jupyter Notebook within local machine
2. Debug code on Windows CMD terminal / Ubuntu on WSL
3. If code runs correctly for reduced computational load (correct logic, no syntax errors etc.),refactor/modify code to run for full computational load if required.
4. Upload code files + dependencies to remote instance via FTP/SFTP filesystem using WinSCP/Filezilla
5. SSH into remote instance and run code on remote instance
6. Download output files generated by code from remote instance to local machine
7. Check if I am getting the expected output files
8. Repeat Step 1

Problem is, what if we are working with large datasets and we can't store them on our local machine? Do we have to buy even more external storage just to be able to download and work with the data on our local machine, only to re-upload changes back to the remote instance?

That's where the Remote Development Extension in Visual Studio Code comes in to make writing and developing code directly on the remote instance easier - we can now write code closer to our data sources residing in the remote environment. When more data comes in after our Proof of Concept for a data science project gets the buy-in from our clients/business users, the ability to work closer to our data sources within a remote environment (be it a data lake, database, data mart etc.) becomes even more important.


---

## Setting up a remote dev environment in Visual Studio Code

To get started, we need:
1. An OpenSSH compatible SSH client
2. Visual Studio Code or Visual Studio Code Insiders
3. Remote Development extension pack on Visual Studio Code

At the time of this post, my local machine is running on Windows 10 version 1809.

### OpenSSH client for Windows users

If you are running Windows 10, check that you are on **version 1803 or newer** - OpenSSH Client will be automatically installed. If not, update to the latest version of Windows 10 either via Automatic Updates or manually.

To check if you have OpenSSH Client installed, go to **Settings -> Manage optional features** and check if you can see OpenSSH Client. IF yes, OpenSSH Client is installed in your local machine.

Otherwise, from **Manage optional features -> Add a feature**, select **OpenSSH Client** and (if desired, but not needed for getting Remote Dev to work) OpenSSH Server to install.

If you are running earlier Windows, you can use Git for Windows which contains ssh.exe in the install path. Note that I have not tested the setup on earlier Windows - it was stated in the [Troubleshooting section of the VSCode Remote Development Docs](https://code.visualstudio.com/docs/remote/troubleshooting#_installing-a-supported-ssh-client).

### Visual Studio Code or Visual Studio Code Insiders

Remote Development in Visual Studio Code was initially released in beta through Visual Studio Code Insiders on 2nd May 2019, and has been released as a Preview extension in Visual Studio Code since the May 2019 (version 1.35) update. A few colleagues and I have been playing around with Remote Development since its beta release on Visual Studio Code Insiders; since then, we have conducted an internal team briefing (with our ever-helpful system architect leading the briefing) on how to set up Remote-SSH in Visual Studio Code for use with our development cloud. In fact, I'm using Remote-WSL in Visual Studio Code to write this post and pushing updates to Github via Git on Visual Studio Code.

Stable releases are on Visual Studio Code; however, if you would like to test out improvements and new features that the Visual Studio Code team are working on for future releases, you could play around with Visual Studio Code Insiders - it's like having a sneak peek into what's coming up in the next stable release of Visual Studio Code.

### Remote Development extension





## References:
1. [Remote Development using SSH](https://code.visualstudio.com/docs/remote/ssh)