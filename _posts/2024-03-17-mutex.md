---
layout: post
title: Mutex
tags: [golang, concurrency, select, channel, buffered channnel, workder pools]
---

## Critical section
Định nghĩa `critical section` trong lập trình concurrent: Khi chương trình đang chạy, một phần đoạn code có thể thay đổi resource dùng chung thì không nên được access bởi nhiều Goroutines tại cùng một thời điểm. Đoạn code modifies shared resource được gọi là critical section. 

Ví dụ, ta có đoạn code cập nhật giá trị của `x` như sau:
```go
x = x + 1
```
Nếu chỉ có một Goroutine truy cập => không có vấn đề gì xảy ra nhưng giả sử có 2 Goroutine cùng chạy đoạn code trên concurently.

Đoạn code trên khi được executed bởi system sẽ được chia nhỏ ra thành những step sau(có thể có nhiều step hơn nhưnng hay giả sử có 3 steps sau)
```
1. Lấy giá trị hiện tại của x
2. Tính toán x + 1
3. Gán gía trị của step 2 vào x
```
![abc]({{ site.baseurl }}/images/cs5.png)
