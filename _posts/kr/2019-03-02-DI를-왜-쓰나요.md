---
layout: post
title: "Re: DI를 왜 쓰나요?"
lang: kr
categories: [OOP]
---

 지금까지 제일 많이 들었던 질문중 하나는 'Spring의 DI를 왜 쓰는지 잘 모르겠어요' 라는 질문이었다.
짧게는 1년차 개발자부터 3~4년차 개발자까지도 DI의 의미를 잘 이해하지 못하는데, 그중에서도 특히 SI, 혹은 그에 준하는 환경에서의 개발자들의 공통 질문이기도 하다.

특히 반복적, 습관적으로 진행되는 service interface 하나 만들고 구현체 service impl 하나 만드는 반복된 환경에서 DI를 이해하기는 당연히 어려울 수 밖에 없다는 공감이 간다.
하물며 그걸 시키는 개발자들도 제대로 이해하지 못하고 그냥 시키니 뭐.. 더 말할 필요가 있을까.

 오래전부터 이어져온 Spring에서의 구조 - Controller, Service, Repository - 에서 Service는 항상 핵심적인 Biz를 담당한다.
간단한 예시를 생각해 보자. Service를 호출했을때 Parameter를 특정 Email로 송신하는 기능을 만든다고 생각해 보면 대충 아래와 같을 것이다.

{% highlight java %}
@RestController
public static class SomeController {

    @Autowired
    private SendService sendService;

    @RequestMapping(method = RequestMethod.POST, path = "send")
    public void sendParameter(@RequestParam String parameter) {

        sendService.sendToEmail(parameter);
    }
}

@Service
public static class SendService {

    public void sendToEmail(String parameter) {

        // Email로 송신
    }
}
{% endhighlight %}

이렇게 커밋까지 끝나고 다른 작업을 하고 있는데 며칠 뒤 팀장이 부른다.
Email보다는 SMS로 송신해야 한다고 한다.

빠르게 Method를 수정한다.

{% highlight java %}
@RestController
public static class SomeController {

    @Autowired
    private SendService sendService;

    @RequestMapping(method = RequestMethod.POST, path = "send")
    public void sendParameter(@RequestParam String parameter) {

        sendService.sendToEmail(parameter);
    }
}

@Service
public static class SendService {

    public void sendToEmail(String parameter) {

        // SMS로 송신
    }
}
{% endhighlight %}

수정하고 SMS가 잘 나가는걸 보고 다른 작업에 들어가려는 찰나, 옆자리에서 비명이 들린다.
알고 보니 그 며칠을 못참고 Email 송신 기능을 옆 파트에서 가져다 썼는데, 갑자기 SMS가 나간단다.