---
title: 2019-02-11 15 Weex基础
permalink: /year-archive/
layout: posts
last_modified_at: 2019-02-11T09:45:06-05:00
tags:
  - Weex
categories:
  - Weex
---

### 语法基础
- Hello Weex

```JavaScript
// div, text均以原生组件渲染
<template>
  <div style="justify-content:center">
    <text class="">venciallee</text>
  </div>
</template>

  //CSS样式, scoped表示只能作用于当前组件
<style scoped>
  .freestyle {
    color: #41B883;
    font-size: 233px;
    text-align: center;
  }
</style>
```

- 原生模块, `weex.requireModule('xxx')`, 加载模块
- 集成到Android平台
  - 依赖

```Java
compile 'com.android.support:recyclerview-v7:23.1.1'
compile 'com.android.support:support-v4:23.1.1'
compile 'com.android.support:appcompat-v7:23.1.1'
compile 'com.alibaba:fastjson:1.1.46.android'
compile 'com.taobao.android:weex_sdk:0.5.1@aar'
```
  - 初始化与渲染

```Java
  public class ImageAdapter implements IWXImgLoaderAdapter {
      @Override
      public void setImage(String url, ImageView view, WXImageQuality quality, WXImageStrategy strategy) {
        //实现你自己的图片下载，否则图片无法显示。
      }
  }

  // 必须实现ImageAdapter否则图片无法下载
  public class WXApplication extends Application {
      @Override
      public void onCreate() {
        super.onCreate();
        InitConfig config = new InitConfig.Builder().setImgAdapter(new ImageAdapter()).build();
        WXSDKEngine.initialize(this, config);
      }
  }

  // 渲染
  public class MainActivity extends AppCompatActivity implements IWXRenderListener {
    WXSDKInstance mWXSDKInstance;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mWXSDKInstance = new WXSDKInstance(this);
        //渲染回调...
        mWXSDKInstance.registerRenderListener(this);
        // 渲染代码, 可渲染本地/远端js文件, 即.we transform后的js文件
        mWXSDKInstance.render("WXSample", WXFileUtils.loadFileContent("hello.js",this), null, null, -1, -1, WXRenderStrategy.APPEND_ASYNC);
    }

    @Override
    public void onRenderSuccess(WXSDKInstance instance, int width, int height) {}

    @Override
    public void onRefreshSuccess(WXSDKInstance instance, int width, int height) {}

      @Override
      public void onException(WXSDKInstance instance, String errCode, String msg) {}
    // activity生命周期传递, 这里忽略
  }
```
- 集成到iOS平台
  - 增加依赖
  - 初始化和渲染
