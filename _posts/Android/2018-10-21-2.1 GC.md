---
title: 2.1 GC
permalink: /year-archive/
layout: posts
last_modified_at: 2018-10-21T09:45:06-05:00
tags:
  - Java
  - GC
categories:
  - Java
---

### 2.1.1 Java内存模型与内存管理
* Young Memory Generation (年轻代)
    * Eden
    * S0 (幸存区, Eden满后通过Minor GC将对象移动到这)
    * S1 (幸存区, Eden满后通过Minor GC将对象移动到这)
* Old Memory Generation (老年代)
    * Minor GC15次后还存活 / S1满后且Minor GC后, 将对象提前移动到老年代
* Permanent Generation (持久代)
    * 方法区 (运行时常量, 静态变量, 方法代码)
    * 运行时常量池(运行时常量, 静态方法)
    * Memory Pool(存储不可变对象, 如String)
* Java Stack
    * 线程堆栈
* GC类型
    * Minor GC
        * 扫描清除Eden区
    * Major GC
        * 扫描清除老年区
    * Full GC
        * 扫描清除Eden区, 老年区, 永久区
* 内存区域
  - 堆, 存放对象实例, GC回收主要区域
  - 方法区, 存储类信息, 常量、静态变量
  - 虚拟机栈, 存储方法执行内存模型, 存储局部变量表, 动态链接, 方法出口
  - 本地方法栈, 虚拟机是用到Native服务
  - 程序计数器, 指令指示器, 线程私有
* 强弱软引用
  - 软引用, 内存不足的时候JVM才回收该对象
  - 弱引用, GC扫描到弱引用即回收
  - 虚引用, 被GC收系统通知
* GC算法

### 2.1.2 GC Roots (可达性)
* System Class
    * Class Loaded by Bootstrap/system class loader
* JNI Local
    * Local variable in native code.
* JNI Global
    * Global variable in native code.
* Thread Block
    * Object referred to from a currently active thread block
* Thread
    * a started, but not stopped, Thread
* Java Local
    * Local variable.
* Native Stack
    * In or out params in native code.
* Java Stack Frame
    * A Java stack frame, holding local variable
* 更多请参考[Garbage Collection Roots](https://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.mat.ui.help%2Fconcepts%2Fgcroots.html)

### 2.1.3 GC算法
- 引用计数算法
