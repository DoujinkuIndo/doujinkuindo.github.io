## 1.1 PHP引用变量
定义：不同变量名指向同一地址  
定义方式：使用&符号

```
<?php
// 定义一个变量
$a = range(0,1000);
var_dump(memory_get_usage());

// 定义变量b，将a变量的值赋值给b
// COW Copy On Write
$b = &$a;
var_dump(memory_get_usage());

// 对a进行修改 
$a = range(0,1000);
var_dump(memory_get_usage());

// unset 只会取消引用，不会销毁空间
$a = 1;
$b = &$a;
unset($b);
echo $a . "\n";
```

对象有特殊性，不会复制空间。可以使用克隆方法复制空间。

```
// 对象本身就是引用传递
class Person
{
    public $name = "aaa";
}

// p1、p2指向同一个空间
$p1 = new Person;
$p2 = $p1;
$p2->name = "bbb";
```

## 1.2 常量与数据类型
### 1.2.1 PHP的字符串的定义方式及各自的区别
1. 单引号：不能解析变量，不能解析转义字符，只能解析单引号和反斜线本身。单引号效率更高。
2. 双引号：可以解析变量，变量可以使用特殊字符和{}包含。可以解析所有转义字符。
3. heredoc和newdoc
```
// 处理大文本
$str = <<< EoT
// #some string
EoT
```
### 1.2.2 数据类型
#### 三大数据类型（标量、复合、特殊）   
1. 浮点类型：不能运用到比较运算中，不能用于相等的判断。因为交给计算机计算会转二进制，所以会有损耗。
2. 布尔类型：FALSE七种情况（整型0，浮点0.0，空字符串''，布尔false，空数组array()，NULL
3. 数组类型：超全局数组$GLOBALS包含所有。
4. 常量：使用const、define定义。const更快，是语言结构，define是函数。define不能用于类常量定义，const可以。常量一经定义不能被修改，不能被删除。
##### 预定义常量
```
__FILE__、__LINE__、__DIR__、__FUNCTION__、__CLASS__、__TRAIT__、__METHOD__、__NAMESPACE__
```

### 1.2.3 静态变量
静态变量仅在局部函数域中存在，但当程序执行离开此作用域时，其值并不会消失。

static关键字
1. 仅初始化一次
2. 初始化时需要赋值
3. 每次执行函数该值会保留
4. static修饰的变量是局部的，仅在函数内部有效
5. 可以记录函数的调用次数，从而可以在某些条件下终止递归。

例子一：
```
function func()
{
    static $a = 1;
    echo $a ++;
}
func();// 1
func();// 2
```
例子二：

```
<?php
$count = 5;
function get_count()
{
    static $count;//NULL
    return $count++;//1
}
echo $count;//输出5
++$count;//此时是6

echo get_count();//NULL，因为++在后面所以先返回再自增
echo get_count();//1 第二次，不用再声明，然后直接返回上次的值
```


## 1.3 运算符
**PHP支持一个错误运算符**：@。当将其放置在一个PHP表达式之前，该表达式可能产生的任何错误信息都会被忽略。

**PHP运算符优先级**:递增/递减>!>算术运算符>大小比较>（不）相等比较>引用>位运算符(^)>位运算符(|)>逻辑与>逻辑或>三目>赋值>and>xor>or

- 等值判断(FALSE的七种情况都相等)
- 递增/递减运算符不影响布尔值
- 递减NULL值没有效果
- 递增NUUL值为1
- 递增/减在前先运算再返回，在后先返回再运算
- ||和&&bor和and的优先级不同


```
<?php
// 优先级例子
$a = true || $b == 3;

$b = false && $a == 1;

$a = false || true; // true

$b = false or true; // false

// 优先级例子2
$a = 0;
$b = 0;
// > > || > = 
// $a = true; $b = 0;
if ($a = 3 > 0 || $b = 3 > 0) {
    $a++;
    $b++;
    echo $a. "\n";// 1
    echo $b. "\n";// 1
}
```

## 1.4 流程控制
### 1.4.1 PHP遍历数组的三种方式及各自的区别
for循环只能遍历索引数组，foreach可以遍历索引和关联数组，联合使用list(),each()和while循环同样可以遍历索引和关联数组。   
while、list()、each()组合不会reset()   
foreach遍历会对数组进行reset()操作   
if...elseif...else...   
switch...case...和if不同的是，switch后面的控制表达式的数据类型只能是整形、浮点类型或者字符串

## 1.5 正则表达式
正则表达式的作用：分割、查找、匹配、替换字符串

分隔符：正斜线(/)、hash符号(#)以及取反符号(~)

通用原子： \d、\D、\w、\W、\s、\S

元字符：. * ? ^ $ + {N} {n,} {n,m} [] () [^] | [-]

模式修饰符：i m e s U x A D u

```
<?php
// 匹配所有img标签中的src的值
$str = '<img alt="海贼王" id="movie" src="op.jpg" />';
$pattern = '/<img.*?src="(.*?".*?\/?>/i';
preg_match($pattern, $str, $match);
var_dump($match);
```

## 1.6 文件及目录处理
### 1.6.1 文件读取/写入操作
fopen函数   
用来打开一个文件，打开时需要指定打开模式   
打开模式：r/r+、w/w+、a/a+、x/x+、b、t

写入函数：fwrite()、fputs()   
读取函数：fread()(获取一行)、fgets()(获取一个字符)、fgetc()
关闭文件函数：fclose()

file_get_contents()   
file_put_contents()

```
<?php 
// 打开文件、
// 读取内容，在开头加入hello world
// 装拼接好的字符串写回到文件中
$file = './hello.txt';
$handle = fopen($file, 'r');
$content = fread($handle, filesize($file));
$content = 'hello world' . $content;
fclose($handle);
$handle = fopen($file, 'w');
fwrite($handle, $content);
fclose($handle);
```
### 1.6.2 目录处理

## 1.7 会话控制技术
cookie和session的区别及各自的工作机制，存储位置等，简述cookie的优缺点。   
web是通过http协议来实现的，而http协议是无状态控制的协议。

## 1.8 面向对象
PHP的类权限控制修饰符：public、protected、private

### 1.8.1 面向对象的继承
- 单一继承：只允许同时继承一个父类
- 方法重写

```
<?php
Class Father
{
    public function test()
    {
    }
}

Class Son extends Father
{
    public function test()
    {
        parent::test()
    }
}
```
魔术方法：__construct()、__call()、__get()、__set()

设计模式：工厂模式、单例模式、注册树模式、适配器模式、观察者模式和策略模式

## 1.9 网络协议
HTTP/1.1中，状态码 200 301 304 403 404 500

HTTP协议的请求方法：GET POST HEAD OPTIONS PUT DELETE TRACE

### 1.9.1 OSI七层模型
1. 物理层：建立、维护、断开物理连接
2. 数据链路层：建立逻辑连接、差错校验等功能
3. 网络层：进行逻辑地址寻址，实现不同网络之间的路径选择
4. 传输层：定义传输数据的协议端口号TCP/UDP
5. 会话层：建立、管理、终止会话
6. 表示层：数据的表示、安全、压缩
7. 应用层：HTTP FTP SMTP POP3

## 1.10 PHP的运行原理
- CGI：连接解析器的桥梁
- FastCGI：CGI的改良版
- PHP-FPM：fast进程管理器

PHP常见配置项目：allow_url_fopen、display_errors、safe_mode、upload_max_filesize、post_max_size
