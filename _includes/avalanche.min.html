<h2>Just Making the Payments</h2><h3>Total Paid</h3><div id="just-payments-total-paid"></div><h3>Total Balance and Minimum Payment over Time</h3><div id="just-payments-balance-chart" class="snowball-chart"></div><h3>Average Interest Rate over Time</h3><div id="just-payments-interest-chart" class="snowball-chart"></div>
<h2>Snowball Method Using the Highest Rate</h2><h3>Total Balance and Minimum Payment over Time</h3><div id="highest-rate-balance-chart" class="snowball-chart"></div><h3>Average Interest Rate over Time</h3><div id="highest-rate-interest-chart" class="snowball-chart"></div>
<h2>Snowball Method Using the Lowest Balance</h2><h3>Total Balance and Minimum Payment over Time</h3><div id="lowest-balance-balance-chart" class="snowball-chart"></div><h3>Average Interest Rate over Time</h3><div id="lowest-balance-interest-chart" class="snowball-chart"></div>
<form name="form1" method="GET"><table id="debt-table"><thead><tr><th>Debt</th><th>Starting Balance</th><th>Rate</th><th>Payment</th><th>Minimum Payment</th><th>Minimum Payment Type</th></tr></thead><tbody></tbody></table><input type="button" value="Add Row" id="addRowButton" /><input type="button" value="Remove Row" id="removeRowButton" /><input type="submit" value="Submit"></form>
<script type="text/javascript">function DebtProto(){this.snowball=0,this.getMinPayment=function(){return"percent"===this.minpaymenttype?Math.max(Math.round(this.balance*this.minpayment),1):this.minpayment},this.getPayment=function(){return this.onlymin?this.getMinPayment():this.payment},this.update=function(){this.balance=this.balance*(1+this.rate/12)-this.getPayment(),this.balance=Math.round(this.balance),this.balance<this.payment&&("dollar"===this.getminpaymenttype&&this.balance<this.minpayment&&(this.minpayment=this.balance),this.snowball=this.payment-this.balance,this.payment=this.balance),this.balance<=0&&(this.balance=0,this.minpayment=0,this.snowball=this.payment,this.payment=0)}}function Debt(a,b,c,d,e,f,g){this.name=a,this.balance=b,this.rate=c,this.payment=d,this.onlymin=e,this.minpayment=f,this.minpaymenttype=g,$.extend(this,new DebtProto)}function avalanche(a,b){var c=a.reduce(function(a,b){return a+b.snowball},0);if(c>0){var d=a.filter(function(a){return 0==a.snowball});if(a.forEach(function(a){a.snowball=0}),d.length>0){var e=b(d);e.payment=e.payment+c,e.onlymin=!1}}}function sumBalances(a){return a.reduce(function(a,b){return a+b.balance},0)}function sumMinpayments(a){return a.reduce(function(a,b){return a+b.getMinPayment()},0)}function sumPayments(a){return a.reduce(function(a,b){return a+b.getPayment()},0)}function averageInterest(a){var b=sumBalances(a),c=a.reduce(function(a,b){return a+b.balance*b.rate},0);return c/b}function lowestBalance(a){return a.reduce(function(a,b){return null==a?b:a.balance>b.balance?b:a.balance===b.balance&&a.rate<b.rate?b:a})}function highestRate(a){return a.reduce(function(a,b){return null==a?b:a.rate<b.rate?b:a.rate===b.rate&&a.balance>b.balance?b:a})}function usingMethod(a,b){for(var c={balances:[["year","balance","minimum payment"],[0,sumBalances(a),sumMinpayments(a)]],interests:[["year","interest"],[0,100*averageInterest(a)]],totalPaid:0,months:0},d=1,e=sumBalances(a);e>0&&(a.forEach(function(a){a.update()}),d%12===0&&(c.balances.push([d/12,e,sumMinpayments(a)]),c.interests.push([d/12,100*averageInterest(a)])),c.totalPaid=c.totalPaid+sumPayments(a),"undefined"!=typeof b&&avalanche(a,b),d++,!(d>500));e=sumBalances(a));return c.months=d,c}function getResults(a){var b=JSON.parse(JSON.stringify(a));b.forEach(function(a){$.extend(a,new DebtProto)});var c=JSON.parse(JSON.stringify(a));c.forEach(function(a){$.extend(a,new DebtProto)});var d=JSON.parse(JSON.stringify(a));d.forEach(function(a){$.extend(a,new DebtProto)});var e={highestRate:usingMethod(b,highestRate),lowestBalance:usingMethod(c,lowestBalance),justPayments:usingMethod(d)};return e}function getTimeString(a){var b=Math.floor(a/12),c=a-12*b;return b+" years "+c+" months"}function generateRow(a){var b="<input type='text' name='name' value='"+a.name+"' required />",c="$<input type='number' name='balance' min='0' value='"+a.balance+"' required />",d="<input type='number' name='rate' min='0' max='100' step='0.01' value='"+100*a.rate+"' required />%",e="$<input type='number' name='payment' min='0' value='"+a.payment+"' required />",f="<input type='checkbox' name='onlymin' value='true' "+(a.onlymin?"checked ":"")+"/> Minimum",g="<input type='number' name='minpayment' min='0' value='";g+="percent"===a.minpaymenttype?100*a.minpayment:a.minpayment,g+="' required />";var h="<select name='minpaymenttype'><option value='dollar'"+("dollar"===a.minpaymenttype?" selected":"")+">dollar</option><option value='percent'"+("percent"===a.minpaymenttype?" selected":"")+">percent</option></select>",i="<tr><td>"+b+"</td><td>"+c+"</td><td>"+d+"</td><td>"+e+f+"</td><td>"+g+"</td><td>"+h+"</td></tr>";return i}function make(a,b){$("#"+a+"-total-paid").append("$"+b.totalPaid+" in "+getTimeString(b.months)),c3.generate({bindto:"#"+a+"-balance-chart",data:{x:"year",rows:b.balances,type:"spline"},axis:{x:{label:{text:"year",position:"outer-center"}},y:{label:{text:"dollars",position:"outer-middle"}}}}),c3.generate({bindto:"#"+a+"-interest-chart",data:{x:"year",rows:b.interests,type:"spline"},axis:{x:{label:{text:"year",position:"outer-center"}},y:{label:{text:"percent",position:"outer-middle"}}}})}$(document).ready(function(){$("#addRowButton").click(function(){var a=generateRow(new Debt("",0,0,0,0,"dollar"));$("#debt-table tbody").append(a)}),$("#removeRowButton").click(function(){$("#debt-table tbody tr").last().remove()});var a;if(hasKey("name")&&hasKey("balance")&&hasKey("rate")&&hasKey("payment")&&hasKey("minpayment"))a=getObjectArray(),a.forEach(function(a){$.extend(a,new DebtProto),a.rate=a.rate/100,a.balance=parseInt(a.balance),a.payment=parseInt(a.payment),"percent"===a.minpaymenttype?a.minpayment=a.minpayment/100:a.minpayment=parseInt(a.minpayment)});else{a=new Array;var b=new Debt("mortgage",15e4,.03,750,!0,750,"dollar"),c=new Debt("car loan",2e4,.1,250,!0,250,"dollar"),d=new Debt("credit card 1",5e3,.2,100,!1,.04,"percent"),e=new Debt("credit card 2",100,.01,100,!0,.04,"percent");a=[b,c,d,e]}for(var f=0;f<a.length;f++){var g=a[f];$("#debt-table").append(generateRow(g))}var h=getResults(a);make("highest-rate",h.highestRate),make("lowest-balance",h.lowestBalance),make("just-payments",h.justPayments)});</script>