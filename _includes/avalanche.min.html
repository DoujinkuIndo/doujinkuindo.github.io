<h2>Snowball Method Using the Highest Rate</h2><h3>Total Balance and Minimum Payment over Time</h3><div id="highest-rate-balance-chart" style="width: 90%; height: 300px;"></div><h3>Average Interest Rate over Time</h3><div id="highest-rate-interest-chart" style="width: 90%; height: 300px;"></div>
<h2>Snowball Method Using the Lowest Balance</h2><h3>Total Balance and Minimum Payment over Time</h3><div id="lowest-balance-balance-chart" style="width: 90%; height: 300px;"></div><h3>Average Interest Rate over Time</h3><div id="lowest-balance-interest-chart" style="width: 90%; height: 300px;"></div>
<form name="form1" method="GET"><table id="debt-table"><thead><tr><th>Debt</th><th>Starting Balance</th><th>Rate</th><th>Payment</th><th>Minimum Payment</th><th>Minimum Payment Type</th></tr></thead><tbody></tbody></table><input type="button" value="Add Row" id="addRowButton" /><input type="button" value="Remove Row" id="removeRowButton" /><input type="submit" value="Submit"></form>
<script type="text/javascript">function DebtProto(){this.snowball=0,this.getMinPayment=function(){return"percent"===this.minpaymenttype?Math.round(this.balance*this.minpayment):this.minpayment},this.update=function(){this.balance=this.balance*(1+this.rate/12)-this.payment,this.balance=Math.round(this.balance),this.balance<this.payment&&("dollar"===this.getminpaymenttype&&this.balance<this.minpayment&&(this.minpayment=this.balance),this.snowball=this.payment-this.balance,this.payment=this.balance),this.balance<=0&&(this.balance=0,this.minpayment=0,this.snowball=this.payment,this.payment=0)}}function Debt(a,b,c,d,e,f){this.name=a,this.balance=b,this.rate=c,this.payment=d,this.minpayment=e,this.minpaymenttype=f,$.extend(this,new DebtProto)}function avalanche(a,b){var c=a.reduce(function(a,b){return a+b.snowball},0);if(c>0){var d=a.filter(function(a){return 0==a.snowball});if(a.forEach(function(a){a.snowball=0}),d.length>0){var e=b(d);e.payment=e.payment+c}}}function sumBalances(a){return a.reduce(function(a,b){return a+b.balance},0)}function sumMinpayments(a){return a.reduce(function(a,b){return a+b.getMinPayment()},0)}function averageInterest(a){var b=sumBalances(a),c=a.reduce(function(a,b){return a+b.balance*b.rate},0);return c/b}function lowestBalance(a){return a.reduce(function(a,b){return null==a?b:a.balance>b.balance?b:a})}function highestRate(a){return a.reduce(function(a,b){return null==a?b:a.rate<b.rate?b:a})}function usingMethod(a,b){for(var c={balances:[["month","balance","minimum payment"],[0,sumBalances(a),sumMinpayments(a)]],interests:[["month","interest"],[0,100*averageInterest(a)]]},d=1;sumBalances(a)>0&&(a.forEach(function(a){a.update()}),c.balances.push([d,sumBalances(a),sumMinpayments(a)]),c.interests.push([d,100*averageInterest(a)]),avalanche(a,b),d++,!(d>500)););return c}function getResults(a){var b=JSON.parse(JSON.stringify(a));b.forEach(function(a){$.extend(a,new DebtProto)});var c=JSON.parse(JSON.stringify(a));c.forEach(function(a){$.extend(a,new DebtProto)});var d={highestRate:usingMethod(b,highestRate),lowestBalance:usingMethod(c,lowestBalance)};return d}function generateRow(a){var b="<input type='text' name='name' value='"+a.name+"' required />",c="$<input type='number' name='balance' min='0' value='"+a.balance+"' required />",d="<input type='number' name='rate' min='0' max='100'  value='"+100*a.rate+"' required />%",e="$<input type='number' name='payment' min='0' value='"+a.payment+"' required />",f="<input type='number' name='minpayment' min='0' value='"+a.minpayment+"' required />",g="<select name='minpaymenttype'><option value='dollar'"+("dollar"==a.minpaymenttype?" selected":"")+">dollar</option><option value='percent'"+("percent"==a.minpaymenttype?" selected":"")+">percent</option></select>",h="<tr><td>"+b+"</td><td>"+c+"</td><td>"+d+"</td><td>"+e+"</td><td>"+f+"</td><td>"+g+"</td></tr>";return h}$(document).ready(function(){$("#addRowButton").click(function(){var a=generateRow(new Debt("",0,0,0,0,"dollar"));$("#debt-table tbody").append(a)}),$("#removeRowButton").click(function(){$("#debt-table tbody tr").last().remove()});var a;if(hasKey("name")&&hasKey("balance")&&hasKey("rate")&&hasKey("payment")&&hasKey("minpayment"))a=getObjectArray(),a.forEach(function(a){$.extend(a,new DebtProto),a.rate=a.rate/100,a.balance=parseInt(a.balance),a.payment=parseInt(a.payment),"percent"===a.minpaymenttype?a.minpayment=a.minpayment/100:a.minpayment=parseInt(a.minpayment)});else{a=new Array;var b=new Debt("mortgage",15e4,.03,750,750,"dollar"),c=new Debt("car loan",2e4,.1,250,250,"dollar"),d=new Debt("credit card",5e3,.2,100,.04,"percent");a=[b,c,d]}for(var e=0;e<a.length;e++){var f=a[e];$("#debt-table").append(generateRow(f))}var g=getResults(a);c3.generate({bindto:"#highest-rate-balance-chart",data:{x:"month",rows:g.highestRate.balances,type:"spline"},axis:{x:{label:{text:"month",position:"outer-center"}},y:{label:{text:"dollars",position:"outer-middle"}}}}),c3.generate({bindto:"#highest-rate-interest-chart",data:{x:"month",rows:g.highestRate.interests,type:"spline"},axis:{x:{label:{text:"month",position:"outer-center"}},y:{label:{text:"percent",position:"outer-middle"}}}}),c3.generate({bindto:"#lowest-balance-balance-chart",data:{x:"month",rows:g.lowestBalance.balances,type:"spline"},axis:{x:{label:{text:"month",position:"outer-center"}},y:{label:{text:"dollars",position:"outer-middle"}}}}),c3.generate({bindto:"#lowest-balance-interest-chart",data:{x:"month",rows:g.lowestBalance.interests,type:"spline"},axis:{x:{label:{text:"month",position:"outer-center"}},y:{label:{text:"percent",position:"outer-middle"}}}})});</script>
