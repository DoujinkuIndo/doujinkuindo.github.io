---
layout: default
permalink: /newpost/
javascripts: [/js/d3.min.js, /js/c3.min.js]
csses: [/css/c3.css]
---

<div id="balanceChart" style="width: 90%; height: 300px;"></div>
<script type="text/javascript">    
    function createItem(balance, rate, payment, minpayment) {
        return {balance:balance, 
                    rate:rate, 
                    payment:payment, 
                    minpayment: minpayment, 
                    minpaymenttype: 'dollar',
                    update: function() {
                        this.balance = this.balance * (1 + this.rate / 12) - this.payment;
                        
                        if(this.balance < this.minpayment) {
                            this.minpayment = this.balance;   
                        }
        
                        if(this.balance <= 0) {
                            this.balance = 0;
                            this.minpayment = 0;
                        }
                    }
        };
    }
    
    function sumBalances(items) {
        return items.reduce(function(p, c){return p + c.balance;}, 0)
    }
    
    function sumMinpayments(items) {
        return items.reduce(function(p, c){return p + c.minpayment;}, 0)
    }
    
    function lowestBalance(items) {
        return items.reduce(function(p, c){
            if(p == null){return c;}
            else if(p.balance > c.balance){return c;}
            else{return p;}
        });
     }
    
    function highestRate(items) {
        return items.reduce(function(p, c){
            if(p == null){return c;}
            else if(p.rate < c.rate){return c;}
            else{return p;}
        });
    }
    
    function getBalances(items) {        
        var balances = [[0,sumBalances(items),sumMinpayments(items)]];
        
        var month = 1;
    
        while (sumBalances(items) > 0) {
            items.forEach(function(item){item.update();});
    
            balances.push([month,sumBalances(items),sumMinpayments(items)]);

            month++;
            
            if(month > 500) {
                break;
            }
        }
        
        return balances;
    }
        
    var house = createItem(100000, 0.06, 1000, 1000);
    var car = createItem(20000, 0.1, 250, 250);
    var everything = [house, car];
    
    var balances = [['month', 'balance', 'minpayment']];
    balances = balances.concat(getBalances(everything));

    var chart = c3.generate({
        bindto: '#balanceChart',
        data: {
            x: 'month',
            rows: balances,
            type: 'spline'
        },
        axis: {
            x: {
                label: {
                    text: 'month',
                    position: 'outer-center'
                }
            },
            y: {
                label: {
                    text: 'dollars',
                    position: 'outer-middle'
                }
            }
        }
    });
</script>
